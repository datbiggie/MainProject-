{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Gestión de Sucursales</title>
<link rel="stylesheet" href="{% static 'sucursal/css/main.css' %}">
<link rel="stylesheet" href="{% static 'barra_superior/css/main.css' %}">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- SweetAlert2 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>
<body>

<!-- SVG Icons -->
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <defs>
	<symbol xmlns="http://www.w3.org/2000/svg" id="menu" viewBox="0 0 24 24"><path fill="currentColor" d="M2 6a1 1 0 0 1 1-1h18a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1m0 6.032a1 1 0 0 1 1-1h18a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1m1 5.033a1 1 0 1 0 0 2h18a1 1 0 0 0 0-2z"/></symbol>
	<symbol xmlns="http://www.w3.org/2000/svg" id="user" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="9" r="3"/><circle cx="12" cy="12" r="10"/><path stroke-linecap="round" d="M17.97 20c-.16-2.892-1.045-5-5.97-5s-5.81 2.108-5.97 5"/></g></symbol>
	<symbol xmlns="http://www.w3.org/2000/svg" id="bell" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6.448 7.969C6.448 4.596 9.044 2 12.417 2C15.79 2 18.386 4.596 18.386 7.969C18.386 11.342 18.386 12.053 18.386 13.474C18.386 14.895 18.386 15.605 18.386 18.979C18.386 19.403 18.386 19.615 18.386 19.721C18.386 19.827 18.386 19.88 18.386 19.88C18.386 19.88 18.333 19.88 18.227 19.88C18.121 19.88 17.909 19.88 17.485 19.88H7.349C6.925 19.88 6.713 19.88 6.607 19.88C6.501 19.88 6.448 19.88 6.448 19.88C6.448 19.88 6.448 19.827 6.448 19.721C6.448 19.615 6.448 19.403 6.448 18.979C6.448 15.605 6.448 14.895 6.448 13.474C6.448 12.053 6.448 11.342 6.448 7.969Z"/><path d="M10.766 19.88C10.766 20.914 11.732 21.88 12.766 21.88C13.8 21.88 14.766 20.914 14.766 19.88"/></g></symbol>
	<symbol xmlns="http://www.w3.org/2000/svg" id="heart" viewBox="0 0 24 24"><path fill="currentColor" d="M20.16 4.61A6.27 6.27 0 0 0 12 4a6.27 6.27 0 0 0-8.16 9.48l7.45 7.45a1 1 0 0 0 1.42 0l7.45-7.45a6.27 6.27 0 0 0 0-8.87Zm-1.41 7.46L12 18.81l-6.75-6.74a4.28 4.28 0 0 1 3-7.3a4.25 4.25 0 0 1 3 1.25a1 1 0 0 0 1.42 0a4.27 4.27 0 0 1 6 6.05Z"/></symbol>
	<symbol xmlns="http://www.w3.org/2000/svg" id="cart" viewBox="0 0 24 24"><path fill="currentColor" d="M8.5 19a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 8.5 19ZM19 16H7a1 1 0 0 1 0-2h8.491a3.013 3.013 0 0 0 2.885-2.176l1.585-5.55A1 1 0 0 0 19 5H6.74a3.007 3.007 0 0 0-2.82-2H3a1 1 0 0 0 0 2h.921a1.005 1.005 0 0 1 .962.725l.155.545v.005l1.641 5.742A3 3 0 0 0 7 18h12a1 1 0 0 0 0-2Zm-1.326-9l-1.22 4.274a1.005 1.005 0 0 1-.963.726H8.754l-.255-.892L7.326 7ZM16.5 19a1.5 1.5 0 1 0 1.5 1.5a1.5 1.5 0 0 0-1.5-1.5Z"/></symbol>
	<symbol xmlns="http://www.w3.org/2000/svg" id="home" viewBox="0 0 24 24"><path fill="currentColor" d="M10 20v-6h4v6h5v-8h3L12 3L2 12h3v8z"/></symbol>
	<symbol xmlns="http://www.w3.org/2000/svg" id="faq" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41c0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/></symbol>
	<symbol xmlns="http://www.w3.org/2000/svg" id="category" viewBox="0 0 24 24"><path fill="currentColor" d="M19 5.5h-6.28l-.32-1a3 3 0 0 0-2.84-2H5a3 3 0 0 0-3 3v13a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-10a3 3 0 0 0-3-3Zm1 13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-13a1 1 0 0 1 1-1h4.56a1 1 0 0 1 .95.68l.54 1.64a1 1 0 0 0 .95.68h7a1 1 0 0 1 1 1Z"/></symbol>
	<symbol xmlns="http://www.w3.org/2000/svg" id="box" viewBox="0 0 24 24"><path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></symbol>
	<symbol xmlns="http://www.w3.org/2000/svg" id="service" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></symbol>
	<symbol xmlns="http://www.w3.org/2000/svg" id="business" viewBox="0 0 24 24"><path fill="currentColor" d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10z"/></symbol>
	<symbol xmlns="http://www.w3.org/2000/svg" id="location" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></symbol>
  </defs>
</svg>

<!-- Offcanvas para el carrito -->
<div class="offcanvas offcanvas-end" data-bs-scroll="true" tabindex="-1" id="offcanvasCart">
  <div class="offcanvas-header justify-content-center">
	<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
	<div class="order-md-last">
	  <h4 class="d-flex justify-content-between align-items-center mb-3">
		<span class="text-primary">Tu carrito</span>
		<span class="badge bg-primary rounded-pill">0</span>
	  </h4>
	  <ul class="list-group mb-3">
		<li class="list-group-item d-flex justify-content-between lh-sm">
		  <div>
			<h6 class="my-0">Carrito vacío</h6>
			<small class="text-body-secondary">No hay productos agregados</small>
		  </div>
		</li>
	  </ul>
	  <button class="w-100 btn btn-primary btn-lg" type="submit">Continuar al checkout</button>
	</div>
  </div>
</div>

<!-- Offcanvas para el menú de navegación -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar">
  <div class="offcanvas-header justify-content-between">
	<h4 class="fw-normal text-uppercase fs-6">Menú</h4>
	<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
	<ul class="navbar-nav justify-content-end menu-list list-unstyled d-flex flex-column gap-2 mb-0">
	  <li class="nav-item">
		<a href="{% url 'index' %}" class="nav-link d-flex align-items-center gap-3">
		  <svg width="24" height="24" viewBox="0 0 24 24"><use xlink:href="#home"></use></svg>
		  <span>Inicio</span>
		</a>
	  </li>
	  <li class="nav-item">
		<button class="btn btn-toggle dropdown-toggle w-100 d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#categories-collapse" aria-expanded="false">
		  <span class="d-flex align-items-center gap-3">
			<svg width="24" height="24" viewBox="0 0 24 24"><use xlink:href="#category"></use></svg>
			Categorías
		  </span>
		</button>
		<div class="collapse" id="categories-collapse">
		  <ul class="btn-toggle-nav list-unstyled fw-normal ps-4 pb-1">
			<li><a href="#" class="dropdown-item">Productos</a></li>
			<li><a href="#" class="dropdown-item">Servicios</a></li>
		  </ul>
		</div>
	  </li>
	  <li class="nav-item">
		<a href="#" class="nav-link d-flex align-items-center gap-3">
		  <svg width="24" height="24" viewBox="0 0 24 24"><use xlink:href="#box"></use></svg>
		  <span>Mi Productos</span>
		</a>
	  </li>
	  <li class="nav-item">
		<a href="#" class="nav-link d-flex align-items-center gap-3">
		  <svg width="24" height="24" viewBox="0 0 24 24"><use xlink:href="#service"></use></svg>
		  <span>Mi Servicios</span>
		</a>
	  </li>
	  <li class="nav-item">
		<a href="#" class="nav-link d-flex align-items-center gap-3">
		  <svg width="24" height="24" viewBox="0 0 24 24"><use xlink:href="#business"></use></svg>
		  <span>Mi Sucursales</span>
		</a>
	  </li>
	  <li class="nav-item">
		<a href="#" class="nav-link d-flex align-items-center gap-3">
		  <svg width="24" height="24" viewBox="0 0 24 24"><use xlink:href="#location"></use></svg>
		  <span>Ubica tus productos y servicios</span>
		</a>
	  </li>
	  <li class="nav-item">
		<a href="#" class="nav-link d-flex align-items-center gap-3">
		  <svg width="24" height="24" viewBox="0 0 24 24"><use xlink:href="#heart"></use></svg>
		  <span>Mi Favoritos</span>
		</a>
	  </li>
	  <li class="nav-item">
		<a href="#" class="nav-link d-flex align-items-center gap-3" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCart" aria-controls="offcanvasCart">
		  <svg width="24" height="24" viewBox="0 0 24 24"><use xlink:href="#cart"></use></svg>
		  <span>Mi Carrito</span>
		</a>
	  </li>
	  <li class="nav-item">
		<a href="#" class="nav-link d-flex align-items-center gap-3">
		  <svg width="24" height="24" viewBox="0 0 24 24"><use xlink:href="#user"></use></svg>
		  <span>Mi cuenta / Perfil</span>
		</a>
	  </li>
	</ul>
  </div>
</div>

<!-- Barra de navegación superior -->
<div class="top-bar-ecommerce">
	<div class="top-bar-left">
		<a href="{% url 'index' %}">
			<img src="{% static 'barra_superior/images/logo.jpg' %}" alt="Logo" class="img-fluid">
		</a>
		<p class="top-bar-text">Bienvenido a la tienda virtual de Todo Aquí</p>
	</div>
	
	<div class="top-bar-right">
		<ul class="d-flex justify-content-end align-items-center list-unstyled m-0 py-0 my-0">
			<li>
				<a href="{% url 'index' %}" class="p-2 mx-1" title="Inicio">
					<svg width="24" height="24"><use xlink:href="#home"></use></svg>
				</a>
			</li>
			<li>
				<a href="#" class="p-2 mx-1" data-bs-toggle="modal" data-bs-target="#sesionModal">
					<svg width="24" height="24"><use xlink:href="#user"></use></svg>
				</a>
			</li>
			<li>
				<a href="#" class="p-2 mx-1" title="Preguntas Frecuentes">
					<svg width="24" height="24"><use xlink:href="#faq"></use></svg>
				</a>
			</li>
		</ul>
	</div>
</div>
<div class="container-xl">
	<div class="card shadow-lg" style="margin-top: 6rem; margin-bottom: 2rem; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1) !important;">
		<div class="table-responsive">
		<div class="table-wrapper">
			<div class="table-title" style="margin: -30px -25px 10px !important;">
				<div class="row">
					<div class="col-sm-6">
						<h2> <b>Sucursales</b></h2>
					</div>
					<div class="col-sm-6">
						

						<!-- Botón Continuar -->
						{% if sqlsucursal|length > 0 %}
							<a href="#" class="btn btn-success ms-2" id="btnContinuar"><i class="material-icons">check_circle</i> <span>Continuar</span></a>
						{% else %}
							<button type="button" class="btn btn-success ms-2" disabled title="Debe agregar al menos una sucursal"><i class="material-icons">check_circle</i> <span>Continuar</span></button>
						{% endif %}
</body>
<script>
document.getElementById('btnContinuar')?.addEventListener('click', function(e) {
	e.preventDefault();
	Swal.fire({
		icon: 'success',
		title: '¡Felicidades!',
		html: 'Has registrado tu empresa <b>{{ empresa_obj.nombre_empresa }}</b> en Todo Aquí con <b>{{ total_sucursales }}</b> sucursal(es).',
		confirmButtonText: 'Ir al inicio'
	}).then(() => {
		window.location.href = "{% url 'index' %}";
	});
});
</script>
</html>
						<a href="#addEmployeeModal" class="btn btn-primary" data-bs-toggle="modal"><i class="material-icons">&#xE147;</i> <span>Agregar Sucursal</span></a>
						<form id="formEliminarTodas" method="POST" action="{% url 'eliminar_todas_sucursales' %}" style="display:inline;">
							{% csrf_token %}
							<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteAllModal">
								<i class="material-icons">&#xE15C;</i> <span>Eliminar Todo</span>
							</button>
						</form>
					</div>
				</div>
			</div>
			<table class="table table-striped table-hover">
				<thead>
					<tr>
						<th>
							<span class="custom-checkbox">
								<input type="checkbox" id="selectAll">
								<label for="selectAll"></label>
							</span>
						</th>
						<th>Sucursal</th>
						<th>Dirección</th>
						<th>Telefono</th>
						<th>Estado</th>
					</tr>
				</thead>
				<tbody>
					{% for sucursal in sqlsucursal %}
					<tr>
						<td>
							<span class="custom-checkbox">
								<input type="checkbox" id="checkbox1" name="options[]" value="1">
								<label for="checkbox1"></label>
							</span>
						</td>
						<td>{{ sucursal.nombre_sucursal }}</td>
						<td>{{ sucursal.direccion_sucursal }}</td>
						<td>{{ sucursal.telefono_sucursal }}</td>
						<td>{{ sucursal.estado_sucursal }}</td>
						<td>
							<a href="#editEmployeeModal" class="edit" data-bs-toggle="modal" data-id="{{ sucursal.id_sucursal }}" data-latitud="{{ sucursal.latitud_sucursal }}" data-longitud="{{ sucursal.longitud_sucursal }}"><i class="material-icons" data-bs-toggle="tooltip" title="Edit">&#xE254;</i></a>
							<a href="#deleteEmployeeModal" class="delete" data-bs-toggle="modal" data-id="{{ sucursal.id_sucursal }}"><i class="material-icons" data-bs-toggle="tooltip" title="Delete">&#xE872;</i></a>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
			<div class="clearfix">
				<div class="hint-text">Showing <b>{{ sqlsucursal|length }}</b> out of <b>{{ total_sucursales }}</b> entries</div>
				{% if paginator.num_pages > 1 %}
				<ul class="pagination">
					{% if sqlsucursal.has_previous %}
						<li class="page-item"><a href="?page={{ sqlsucursal.previous_page_number }}" class="page-link">Previous</a></li>
					{% else %}
						<li class="page-item disabled"><a href="#" class="page-link">Previous</a></li>
					{% endif %}
					
					{% for num in paginator.page_range %}
						{% if num == sqlsucursal.number %}
							<li class="page-item active"><a href="#" class="page-link">{{ num }}</a></li>
						{% elif num > sqlsucursal.number|add:'-3' and num < sqlsucursal.number|add:'3' %}
							<li class="page-item"><a href="?page={{ num }}" class="page-link">{{ num }}</a></li>
						{% endif %}
					{% endfor %}
					
					{% if sqlsucursal.has_next %}
						<li class="page-item"><a href="?page={{ sqlsucursal.next_page_number }}" class="page-link">Next</a></li>
					{% else %}
						<li class="page-item disabled"><a href="#" class="page-link">Next</a></li>
					{% endif %}
				</ul>
				{% endif %}
			</div>
		</div>
	</div>
	</div>        
</div>
<!-- Agregar Sucursal --------------------------------------->
<div id="addEmployeeModal" class="modal fade">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<form method="POST" action="{% url 'sucursalfuncion' %}" id="sucursalForm">
				{% csrf_token %}
				<div class="modal-header">						
					<h4 class="modal-title">Agregar Sucursal</h4>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label>Sucursal</label>
								<input type="text" class="form-control" name="nombre_sucursal" required>
							</div>
							<div class="form-group">
								<label>Teléfono</label>
								<input type="text" class="form-control" name="telefono_sucursal" required>
							</div>
							<div class="form-group">
								<label>Estado</label>
								<select class="form-control" name="estado_sucursal" required>
									<option value="">Seleccione un estado</option>
									<option value="AM">Amazonas</option>
									<option value="AN">Anzoátegui</option>
									<option value="AP">Apure</option>
									<option value="AR">Aragua</option>
									<option value="BA">Barinas</option>
									<option value="BO">Bolívar</option>
									<option value="CA">Carabobo</option>
									<option value="CA">Caracas</option>
									<option value="CO">Cojedes</option>
									<option value="DA">Delta Amacuro</option>
									<option value="DC">Distrito Capital</option>
									<option value="FA">Falcón</option>
									<option value="GU">Guárico</option>
									<option value="LA">Lara</option>
									<option value="ME">Mérida</option>
									<option value="MI">Miranda</option>
									<option value="MO">Monagas</option>
									<option value="NE">Nueva Esparta</option>
									<option value="PO">Portuguesa</option>
									<option value="SU">Sucre</option>
									<option value="TA">Táchira</option>
									<option value="TR">Trujillo</option>
									<option value="VA">Vargas</option>
									<option value="YA">Yaracuy</option>
									<option value="ZU">Zulia</option>
								</select>
							</div>
							<div class="form-group">
								<label>Dirección</label>
								<textarea class="form-control" name="direccion_sucursal" required style="height: 100px;"></textarea>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label>Ubicación de la Sucursal</label>
								<div class="map-container">
									<div class="search-container" style="margin-bottom: 10px;">
										<div style="margin-left: 10px;">
											<div id="locationStatus" style="color: #2196F3; font-size: 14px; font-weight: 500;">
												<span id="locationIcon">⏳</span> Inicializando mapa...
											</div>
											<button type="button" onclick="retryLocation()" style="margin-top: 5px; background-color: #2196F3; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; display: none;" id="retryButton">
												🔄 Reintentar ubicación
											</button>
										</div>
									</div>
									<div id="map" style="height: 200px; width: 100%; border-radius: 8px;"></div>
									<div class="formbold-input-flex" style="margin-top: 15px;">
										<div>
											<label for="latitud" class="formbold-form-label" hidden>Latitud</label>
											<input
												type="text"
												name="latitud_sucursal"
												id="latitud"
												class="form-control"
												readonly
											 hidden/>
										</div>
										<div>
											<label for="longitud" class="formbold-form-label" hidden>Longitud</label>
											<input
												type="text"
												name="longitud_sucursal"
												id="longitud"
												class="form-control"
												readonly
												hidden
											/>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
					<button type="submit" class="btn btn-primary">Guardar</button>
				</div>
			</form>
		</div>
	</div>
</div>
<!-- __________________________________________________________ -->
<!-- Editar sucursal -------------------------------------------------------------------->
<div id="editEmployeeModal" class="modal fade">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<form method="POST" action="{% url 'editar_sucursal' %}" id="editSucursalForm">
				{% csrf_token %}
				<input type="hidden" name="id_sucursal" id="edit_id_sucursal">
				<div class="modal-header">						
					<h4 class="modal-title">Editar Sucursal</h4>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label>Sucursal</label>
								<input type="text" class="form-control" name="nombre_sucursal" id="edit_nombre_sucursal" required>
							</div>
							<div class="form-group">
								<label>Teléfono</label>
								<input type="text" class="form-control" name="telefono_sucursal" id="edit_telefono_sucursal" required>
							</div>
							<div class="form-group">
								<label>Estado</label>
								<select class="form-control" name="estado_sucursal" id="edit_estado_sucursal" required>
									<option value="">Seleccione un estado</option>
									<option value="AM">Amazonas</option>
									<option value="AN">Anzoátegui</option>
									<option value="AP">Apure</option>
									<option value="AR">Aragua</option>
									<option value="BA">Barinas</option>
									<option value="BO">Bolívar</option>
									<option value="CA">Carabobo</option>
									<option value="CA">Caracas</option>
									<option value="CO">Cojedes</option>
									<option value="DA">Delta Amacuro</option>
									<option value="DC">Distrito Capital</option>
									<option value="FA">Falcón</option>
									<option value="GU">Guárico</option>
									<option value="LA">Lara</option>
									<option value="ME">Mérida</option>
									<option value="MI">Miranda</option>
									<option value="MO">Monagas</option>
									<option value="NE">Nueva Esparta</option>
									<option value="PO">Portuguesa</option>
									<option value="SU">Sucre</option>
									<option value="TA">Táchira</option>
									<option value="TR">Trujillo</option>
									<option value="VA">Vargas</option>
									<option value="YA">Yaracuy</option>
									<option value="ZU">Zulia</option>
								</select>
							</div>
							<div class="form-group">
								<label>Dirección</label>
								<textarea class="form-control" name="direccion_sucursal" id="edit_direccion_sucursal" required style="height: 100px;"></textarea>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label>Ubicación de la Sucursal</label>
								<div class="map-container">
									<div class="search-container" style="margin-bottom: 10px;">
										<div style="margin-left: 10px;">
											<div id="editLocationStatus" style="color: #2196F3; font-size: 14px; font-weight: 500;">
												<span id="editLocationIcon">⏳</span> Inicializando mapa...
											</div>
											<button type="button" onclick="retryEditLocation()" style="margin-top: 5px; background-color: #2196F3; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; display: none;" id="editRetryButton">
												🔄 Reintentar ubicación
											</button>
										</div>
									</div>
									<div id="edit_map" style="height: 200px; width: 100%; border-radius: 8px;"></div>
									<div class="formbold-input-flex" style="margin-top: 15px;">
										<div>
											<label for="edit_latitud" class="formbold-form-label">Latitud</label>
											<input
												type="text"
												name="latitud_sucursal"
												id="edit_latitud"
												class="form-control"
												readonly
											 />
										</div>
										<div>
											<label for="edit_longitud" class="formbold-form-label">Longitud</label>
											<input
												type="text"
												name="longitud_sucursal"
												id="edit_longitud"
												class="form-control"
												readonly
											/>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
					<button type="submit" class="btn btn-primary">Guardar Cambios</button>
				</div>
			</form>
		</div>
	</div>
</div>
<!-- Delete Modal HTML -->
<div id="deleteEmployeeModal" class="modal fade">
	<div class="modal-dialog">
		<div class="modal-content">
			<form method="POST" action="{% url 'eliminar_sucursal' %}" id="deleteSucursalForm">
				{% csrf_token %}
				<input type="hidden" name="id_sucursal" id="delete_id_sucursal">
				<div class="modal-header">						
					<h4 class="modal-title">Eliminar Sucursal</h4>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">					
					<p>¿Estás seguro que deseas eliminar esta sucursal?</p>
					<p class="text-warning"><small>Esta acción no se puede deshacer.</small></p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
					<button type="submit" class="btn btn-danger">Eliminar</button>
				</div>
			</form>
		</div>
	</div>
</div>

<!-- Modal de Confirmación de eliminación de todas las sucursales -->
<div id="deleteAllModal" class="modal fade" tabindex="-1" aria-labelledby="deleteAllModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<form id="deleteAllSucursalesForm" method="POST" action="{% url 'eliminar_todas_sucursales' %}">
				{% csrf_token %}
				<div class="modal-header">
					<h5 class="modal-title" id="deleteAllModalLabel">Eliminar todas las Sucursales</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<p>¿Estás seguro que deseas eliminar todas las sucursales?</p>
					<p class="text-warning"><small>Esta acción no se puede deshacer.</small></p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
					<button type="submit" class="btn btn-danger">Eliminar Todas</button>
				</div>
			</form>
		</div>
	</div>
</div>







<!-- Modal para información de sesión -->
	<div class="modal fade" id="sesionModal" tabindex="-1" aria-labelledby="sesionModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
		<div class="modal-content">
		  <div class="modal-header">
			<h5 class="modal-title" id="sesionModalLabel">Información de Sesión</h5>
			<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		  </div>
		  <div class="modal-body">
			{% if user_info %}
			  <div class="alert alert-success">
				<h6 class="alert-heading">¡Bienvenido!</h6>
				<p class="mb-1"><strong>Nombre:</strong> {{ user_info.nombre }}</p>
				<p class="mb-1"><strong>Email:</strong> {{ user_info.email }}</p>
				<p class="mb-0"><strong>Tipo de usuario:</strong> 
				  <span class="badge bg-primary">{{ user_info.tipo }}</span>
				</p>
			  </div>
			  <div class="d-grid gap-2">
				<a href="{% url 'cerrar_sesion' %}" class="btn btn-danger">
				  <svg width="16" height="16" class="me-2"><use xlink:href="#user"></use></svg>
				  Cerrar Sesión
				</a>
			  </div>
			{% else %}
			  <div class="alert alert-warning">
				<h6 class="alert-heading">No has iniciado sesión</h6>
				<p class="mb-0">Para acceder a todas las funcionalidades, por favor inicia sesión.</p>
			  </div>
			  <div class="d-grid gap-2">
				<a href="{% url 'iniciar_sesion' %}" class="btn btn-primary">
				  <svg width="16" height="16" class="me-2"><use xlink:href="#user"></use></svg>
				  Iniciar Sesión
				</a>
			  </div>
			{% endif %}
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
		  </div>
		</div>
	  </div>
	</div>





<script src="{% static 'sucursal/js/main.js' %}"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyArSSR_2q1ZpCJCOKWNLtuCLc5Z2imrzZY&libraries=places&callback=initMap" async defer></script>

</body>
</html>