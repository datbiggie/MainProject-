{% load static %}
<!DOCTYPE html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Configuración Categoria Producto</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/x-icon"  href="{% static 'categ_producto_config/images/favicon.svg' %}" />

    <!-- ========================= CSS here ========================= -->
    <link rel="stylesheet" href="{% static 'categ_producto_config/css/bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{% static 'categ_producto_config/css/LineIcons.3.0.css' %}" />
    <link rel="stylesheet" href="{% static 'categ_producto_config/css/animate.css' %}" />
    <link rel="stylesheet" href="{% static 'categ_producto_config/css/tiny-slider.css' %}" />
    <link rel="stylesheet" href="{% static 'categ_producto_config/css/glightbox.min.css' %}" />
    <link rel="stylesheet" href="{% static 'categ_producto_config/css/main.css' %}" />
    <link rel="stylesheet" href="{% static 'categ_producto_config/css/modal.css' %}" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
   
</head>

<body>
    <!-- Variables globales para JavaScript -->
    <script>
        // Variables globales que se pasan desde Django al JavaScript
        window.CSRF_TOKEN = '{{ csrf_token }}';
        window.DELETE_URL = '/ecommerce/eliminar_categoria_producto/';
    </script>
    
    <section class="features section">
        
        <h1>configuración categoria producto</h1>

        <div class="container">
            {% for categoria in categoria_producto %}
            <div class="row">
                <div class="col-12 wow fadeInUp" data-wow-delay=".2s">
                    <!-- Start Single Feature -->
                    <div class="single-featuer">
                        <img class="shape" src="{% static 'categ_producto_config/images/features/shape.svg' %}" alt="#">
                        <img class="shape2" src="{% static 'categ_producto_config/images/features/shape2.svg' %}" alt="#">
                        
                        <span class="serial">{{ forloop.counter|stringformat:"02d" }}</span>
                        
                        <div class="d-flex align-items-center mb-3">
                            <h3 class="mb-0 me-4" style="margin-top: 12px;">{{ categoria.nombre_categoria_prod }}</h3>
                            <div class="feature-buttons">
                                <button class="btn btn-edit me-2" onclick="abrirModalEditar('{{ categoria.id_categoria_prod }}', '{{ categoria.nombre_categoria_prod|escapejs }}', '{{ categoria.descripcion_categoria_prod|escapejs }}', '{{ categoria.estatus_categoria_prod|escapejs }}')">
                                    <i class="lni lni-pencil"></i> Editar
                                </button>
                                {% if categoria.id_categoria_prod %}
                                <button class="btn btn-delete" onclick="confirmarEliminacion('{{ categoria.id_categoria_prod }}')">
                                    <i class="lni lni-trash"></i> Eliminar
                                </button>
                                {% else %}
                                <button class="btn btn-secondary" disabled title="No se puede eliminar - ID inválido">
                                    <i class="lni lni-trash"></i> Eliminar
                                </button>
                                {% endif %}
                            </div>
                        </div>

                        <p>{{ categoria.descripcion_categoria_prod }}</p>
                    </div>
                    <!-- End Single Feature -->
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- Modal de Edición de Categoría -->
    <div id="editCategoriaModal" class="modal fade" tabindex="-1" aria-labelledby="editCategoriaModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <form method="POST" action="{% url 'editar_categoria_producto' %}" id="editCategoriaForm">
                    {% csrf_token %}
                    <input type="hidden" name="id_categoria" id="edit_id_categoria">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editCategoriaModalLabel">Editar Categoría de Producto</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group mb-3">
                                    <label for="edit_nombre_categoria">Nombre de Categoría *</label>
                                    <input type="text" class="form-control" name="nombre_categoria" id="edit_nombre_categoria" required>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="edit_descripcion_categoria">Descripción Categoría</label>
                                    <textarea class="form-control" name="descripcion_categoria" id="edit_descripcion_categoria" rows="3" placeholder="Ingrese la descripción de la categoría"></textarea>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group mb-3">
                                            <label for="edit_estatus_categoria">Estatus Categoría *</label>
                                            <select class="form-control" name="estatus_categoria" id="edit_estatus_categoria" required>
                                                <option value="">Seleccione un estatus</option>
                                                <option value="Activo">Activo</option>
                                                <option value="Inactivo">Inactivo</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ========================= JS here ========================= -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'categ_producto_config/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'categ_producto_config/js/wow.min.js' %}"></script>
    <script src="{% static 'categ_producto_config/js/tiny-slider.js' %}"></script>
    <script src="{% static 'categ_producto_config/js/glightbox.min.js' %}"></script>
    <script src="{% static 'categ_producto_config/js/count-up.min.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="{% static 'categ_producto_config/js/main.js' %}?v=6"></script>
    <script src="{% static 'categ_producto_config/js/modal.js' %}?v=3"></script>

</body>

</html>