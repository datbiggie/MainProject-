{% load static %}
  {% include 'ecommerce_app/barra_superior_index.html' %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Inicio</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'index/style.css' %}">
    <link rel="stylesheet" href="{% static 'sucursal/css/main.css' %}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        .cart-container {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
        }
        .cart-card {
            transition: transform 0.2s ease-in-out;
        }
        .cart-card:hover {
            transform: translateY(-2px);
        }
        .empty-cart-icon {
            color: #6c757d;
            opacity: 0.5;
        }
        .total-section {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }
    </style>







  </head>

    <body class="cart-container">

  



<div class="container-lg">
	<div class="card shadow mb-3" style="margin-top: 2rem; border-radius: 12px; border: none;">
		<div class="card-header bg-primary text-white" style="border-radius: 12px 12px 0 0;">
			<h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Información del Carrito</h5>
		</div>
		<div class="card-body p-3">
			{% if carrito_info %}
			<div class="row">
				<div class="col-md-3">
					<strong>ID Carrito:</strong><br>
					<span class="text-muted">#{{ carrito_info.id }}</span>
				</div>
				<div class="col-md-3">
					<strong>Estatus:</strong><br>
					<span class="badge bg-{% if carrito_info.estatus == 'activo' %}success{% else %}warning{% endif %}">
						{{ carrito_info.estatus|capfirst }}
					</span>
				</div>
				<div class="col-md-3">
					<strong>Fecha de Creación:</strong><br>
					<span class="text-muted">{{ carrito_info.fecha_creacion|date:"d/m/Y H:i" }}</span>
				</div>
				<div class="col-md-3">
					<strong>Propietario:</strong><br>
					<span class="text-muted">
						<i class="fas fa-{% if carrito_info.propietario.tipo == 'empresa' %}building{% else %}user{% endif %} me-1"></i>
						{{ carrito_info.propietario.nombre }}
					</span><br>
					<small class="text-muted">{{ carrito_info.propietario.email }}</small>
				</div>
			</div>
			<div class="row mt-3">
				<div class="col-12 text-end">
					<button type="button" class="btn btn-primary btn-sm" onclick="verDetalleCarrito()">
						<i class="fas fa-shopping-cart me-2"></i>Detalle
					</button>
				</div>
			</div>
			{% else %}
			<div class="text-center py-4">
				<i class="fas fa-shopping-cart empty-cart-icon" style="font-size: 3rem; margin-bottom: 1rem;"></i>
				<h6 class="text-muted mb-0">No existen carritos para este usuario</h6>
				<p class="text-muted small mt-2">Aún no tienes productos en tu carrito de compras.</p>
			</div>
			{% endif %}
		</div>
	</div>
	
	<!-- Botón de Mis Pedidos Pendientes - Siempre visible si hay pedidos pendientes -->
	{% if pedidos_pendientes %}
	<div class="container-lg mt-3">
		<div class="card shadow" style="border-radius: 12px; border: none;">
			<div class="card-body text-center p-4">
				<div class="alert alert-warning mb-3" role="alert">
					<i class="fas fa-exclamation-triangle me-2"></i>
					<strong>¡Tienes pedidos pendientes!</strong>
				</div>
				<a href="{% url 'mis_pedidos' %}" class="btn btn-warning btn-lg">
					<i class="fas fa-clock me-2"></i>Ver Mis Pedidos Pendientes
				</a>
			</div>
		</div>
	</div>
	{% endif %}
     
</div>
  
      





<div class="mb-5"></div>

    <script src="{% static 'index/js/jquery-1.11.0.min.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script src="{% static 'index/js/plugins.js' %}"></script>
    <script src="{% static 'index/js/script.js' %}"></script>
    <script src="{% static 'index/js/rating-system.js' %}"></script>
    
    <script>
        // Funciones para manejar el carrito
        function increaseQuantity(itemId) {
            const quantityInput = document.getElementById('quantity-' + itemId);
            let currentValue = parseInt(quantityInput.value);
            quantityInput.value = currentValue + 1;
            // Aquí se puede agregar lógica para actualizar en el servidor
        }
        
        function decreaseQuantity(itemId) {
            const quantityInput = document.getElementById('quantity-' + itemId);
            let currentValue = parseInt(quantityInput.value);
            if (currentValue > 1) {
                quantityInput.value = currentValue - 1;
                // Aquí se puede agregar lógica para actualizar en el servidor
            }
        }
        
        function removeItem(itemId, type) {
            if (confirm('¿Estás seguro de que deseas eliminar este elemento del carrito?')) {
                // Aquí se puede agregar lógica para eliminar del servidor
                console.log('Eliminando item:', itemId, 'tipo:', type);
            }
        }
        
        function clearCart() {
            if (confirm('¿Estás seguro de que deseas limpiar todo el carrito?')) {
                // Aquí se puede agregar lógica para limpiar el carrito en el servidor
                console.log('Limpiando carrito');
            }
        }
        
        function proceedToCheckout() {
            // Aquí se puede agregar lógica para proceder al checkout
            console.log('Procediendo al checkout');
        }
        
        function viewItem(itemId) {
            // Aquí se puede agregar lógica para ver los detalles del producto
            console.log('Viendo detalles del producto:', itemId);
            // Ejemplo: redirigir a la página de detalles del producto
            // window.location.href = '/ecommerce/producto/' + itemId;
        }
        
        function verDetalleCarrito() {
            // Redirigir a la página de detalle del carrito
            console.log('Viendo detalle del carrito');
            window.location.href = '/ecommerce/detalle_carrito/';
        }
        
        // Manejar selección de todos los productos
        // Comentado porque el elemento 'selectAllProducts' no existe en este template
        /*
        document.getElementById('selectAllProducts').addEventListener('change', function() {
            const checkboxes = document.querySelectorAll('.product-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.checked = this.checked;
            });
        });
        */
    </script>
  </body>
</html>